!function(e){function t(t,a){return e.ajax({url:flow.api_base+t.route,method:t.method,data:a})}function a(){var t=e("#next_screen"),a=e(".first-screen").height(),i=e(".header");if(t.length>0){if(e(window).scrollTop()>0)return i.hasClass("white-header")||i.addClass("white-header"),!1;if(e(window).scrollTop()<a)return e(".header").removeClass("white-header"),!1}}function i(t){if(e(window).width()>1024){var a=e("#next_screen");e(".first-screen").height(),e(".header");if(a.length>0&&t.deltaY<0&&0==e(window).scrollTop())return e("body, html").animate({scrollTop:e(".first-screen").height()-100},300),!1}}function s(e,t,a){var i=new BMap.Map("map_id",{enableMapClick:!1}),s=13;i.centerAndZoom(new BMap.Point(a,t,s)),i.addControl(new BMap.NavigationControl)}function n(e,t,a){new google.maps.LatLngBounds,new google.maps.Map(document.getElementById("map_id"),{center:{lat:t,lng:a},zoom:8,scrollwheel:!1})}function l(t){e("html").toggleClass("iframe-fullscreen")}var o={news:{route:"news/",method:"GET"},items:{route:"items",method:"GET"},contact:{route:"contact-us",method:"POST"},mailto:{route:"send-mail",method:"POST"},apply:{route:"apply-form",method:"POST"}};e(window).load(function(){var t=e("#page_list_desc");t.length>0&&t.find("li").hover(function(){var t=e(this).index(),a=e("#fade-image");a.find(".img.active").removeClass("active"),a.find(".img").eq(t).addClass("active"),console.log(t)},function(){})}),e(document).ready(function(){function a(t){e(".tab.tab-active").removeClass("tab-active"),t.addClass("tab-active");var a=t.offset().top-e("#header").height();e("html, body").animate({scrollTop:a})}function i(){e(".tab.tab_tile").removeClass("tab-active"),e(".tab.tab_slider").addClass("tab-active")}function l(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?unescape(t[2]):null}function r(e){var t=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return t.test(e)}var c=(e("#home_page"),window.location.hash),d=e(".next_screen_mousewheel");d.length>0&&(console.log("sfsdf"),e(".next_screen").hover(function(){d.addClass("next_screen_mousewheel_ed")},function(){d.removeClass("next_screen_mousewheel_ed")})),e(".group_property_ul li").length>0&&e(".group_property_ul li").matchHeight(),e(document).on("click",".lightbox_btn",function(){var t=e(e(this).attr("href"));if(!t.hasClass("lightbox_visible")){var a=e(this).attr("data-id");if(a)if(e(this).hasClass("view_video")){e("#video").attr("src",a);var i=document.getElementById("video");i.play(),e("html").addClass("video_playing")}else t.find("iframe").attr("src",a);e(".lightbox_visible").removeClass("lightbox_visible"),t.addClass("lightbox_visible"),e("html").addClass("has_lightbox_visible")}return!1}),e(".lightbox_close").click(function(){if(e(".lightbox_visible").removeClass("lightbox_visible"),e(".has_lightbox_visible").removeClass("has_lightbox_visible"),e("html").hasClass("video_playing")){e("html").removeClass("video_playing");var t=document.getElementById("video");t.pause()}return!1});var h=e("#map");e(h).length>0&&flow.lat&&flow.lang&&("google"==flow.map_type?n("map",parseFloat(flow.lat),parseFloat(flow.lang)):"baidu"==flow.map_type&&s("map",parseFloat(flow.lat),parseFloat(flow.lang)));var f=e(".map-wrapper");e(f).length>0&&(e(".view-3d-map").click(function(){var t=e(this).attr("href");return console.log(t),e(t).addClass("open").fadeIn(),!1}),e(f).find(".close-map").click(function(){return e(f).removeClass("open").fadeOut(),!1}),e(f).click(function(t){return e(t.target).hasClass("map-wrapper")&&e(f).removeClass("open").fadeOut(),!1})),e(".carousel_slider").owlCarousel({items:5,autoplay:!0,margin:40,nav:!0,navText:[],responsive:{0:{items:1},767:{items:2},960:{items:5}}}),e(".film_with_us_col").matchHeight(),e(".team_detail").find(".flexslider").flexslider({animation:"fade",slideshow:!1,slideshowSpeed:8e3,animationSpeed:800,smoothHeight:!0,start:function(t){e(window).width()>1024?e(".our_team_list_ul ul li").click(function(){var a=e(this),i=parseInt(e(this).attr("data-index"));a.hasClass("active")||(e(".our_team_list_ul .active").removeClass("active"),a.addClass("active"),t.flexAnimate(i))}):e(".our_team_list_ul ul li").click(function(){e(".our_team_list_ul .active").removeClass("active").find(".text").slideUp(300),e(this).addClass("active");var t=e(this);e(this).find(".text").slideDown(300,function(){e("body, html").animate({scrollTop:t.offset().top-e("#header").height()-15},360)})})}}),e(".team_detail").find(".text").scrollbar({showArrows:!1,scrollx:"simple",scrolly:"simple",autoScrollSize:!1});var u=e("#header-menu");if(e(".screen_btns .sync-item").click(function(){var t=e(this).attr("href"),i=e(t);a(i),window.location.hash=t;var s=e(this).closest(".animate_up").index();return e(".screen_btns .active").removeClass("active"),u.find(".active").removeClass("active"),u.find("li").eq(s).addClass("active"),e(this).addClass("active"),!1}),e(".sv_icons a").click(function(){var t=e(this).attr("href"),i=e(t);a(i),window.location.hash=t;var s=e(this).closest("li").index();return e(".sv_icons .active").removeClass("active"),u.find(".active").removeClass("active"),u.find("li").eq(s).addClass("active"),e(this).closest("li").addClass("active"),!1}),u.find(".sync-item").click(function(){var t=e(this).attr("href");window.location.hash=t;var i=e(t),s=e(this).closest("li").index();if(e(window).width()<1025){if(!u.hasClass("is_open"))return u.addClass("is_open"),!1;if(e(this).closest("li").hasClass("active"))return u.removeClass("is_open"),!1;u.removeClass("is_open")}return u.find(".active").removeClass("active"),e(".screen_btns .active").removeClass("active"),e(".screen_btns").find(".animate_up").eq(s).find("a").addClass("active"),e(".sv_icons .active").removeClass("active"),e(".sv_icons a[href^="+t+"]").closest("li").addClass("active"),e(this).closest("li").addClass("active"),a(i),!1}),c&&(a(e(c)),e(".screen_btns a[href^="+c+"]").addClass("active"),e(".sv_icons .active").removeClass("active"),e(".sv_icons a[href^="+c+"]").closest("li").addClass("active"),u.find("a[href^="+c+"]").closest("li").addClass("active"),c=c.replace("#","")),e(".tabs.tab-active").length>0){e(".tabs.tab-active").attr("id")}e(window).width()<1025&&u.find("li").click(function(){return u.hasClass("is_open")?e(this).hasClass("active")?(u.removeClass("is_open"),!1):void 0:(u.addClass("is_open"),!1)});var v=e("#workshops_slider .flexslider");if(v.length>0){v.flexslider({animation:"slide",slideshow:!1,slideshowSpeed:8e3,animationSpeed:800,touch:!1,smoothHeight:!0,start:function(t){var a=e("#header-menu"),s=window.location.hash;if(s){var n=e(s).index();i(),t.flexAnimate(n)}e(".screen_btns .workshop_btn").click(function(){i();var a=e(this).closest(".animate_up").index();t.flexAnimate(a)}),a.find("a").click(function(){i();var s=e(this).closest("li").index();if(e(window).width()<1025){if(!a.hasClass("is_open"))return a.addClass("is_open"),!1;if(e(this).closest("li").hasClass("active"))return a.closest("li").removeClass("is_open"),!1}t.flexAnimate(s)}),e("#workshop_four_tile .work_shops_tile").click(function(){i();var a=e(this).index();window.location.hash="#"+e(this).attr("id"),t.flexAnimate(a)})},before:function(t){var a=t.animatingTo;e(".screen_btns").find(".active").removeClass("active"),e(".screen_btns .animate_up").eq(a).find("a").addClass("active"),u.find(".active").removeClass("active"),u.find("li").eq(a).addClass("active"),console.log(e("#header").height()),e("html, body").animate({scrollTop:e(".first-screen").height()-e("#header").addClass("white-header").height()},360)}});e("#work_shops_close").click(function(){return e(".tab.tab_tile").addClass("tab-active"),e(".tab.tab_slider").removeClass("tab-active"),u.find(".active").removeClass("active"),e(".screen_btns").find(".active").removeClass("active"),window.location.hash="",!1})}e(".stage_detail_slider .flexslider ul").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,dots:!0});var p;p=e(e(window).width()<=1024?"#contact_form_2":"#contact_form"),e(document).on("click",".error input",function(){e(this).closest(".field").removeClass("error")}),p.length>0&&(e(".thank-you .close").click(function(){return e(".thank-you").hide(),p.find(".field input, .field textarea").val(""),p.find(".placeholder").show(),!1}),p.submit(function(a){console.log("sss");var i=e(this),s=i.find("input.name").val().trim(),n=i.find("input.email").val().trim(),c=!0;0==s.length&&(i.find("input.name").closest(".field").addClass("error"),c=!1),0!=n.length&&r(n)||(i.find(".email").closest(".field").addClass("error"),c=!1);var d=e(this).serialize(),h=e(this).attr("action"),f=window.location.href.lastIndexOf("/");if(h=window.location.href.substr(0,f)+"/"+h,!c)return!1;var u=(l("captcha"),t(o.contact,{validation:p.find(".field_captcha input").val()}));return u.success(function(a){if(console.log(a),1==a.status){p.addClass("wait");var s=t(o.mailto,d);console.log(d),s.success(function(e){console.log(e)}),e(".thank-you").show(),e(i).removeClass("wait"),s.error(function(e){}),s.complete(function(e){console.log(e)})}else console.log("Wrong Captcha"),p.find(".field_captcha").addClass("error")}),!1}),e(".contact_form :input").keyup(function(){e(this).val()?e(this).siblings("label").hide():e(this).siblings("label").show()})),e(".job .title").click(function(){var t=e(this).parent(".job");return t.hasClass("job_open")?t.removeClass("job_open").find(".desc").slideUp():(e(".job_open").removeClass("job_open").find(".desc").slideUp(),t.addClass("job_open").find(".desc").slideDown()),!1});var m=e("#job_list");e(".filter_location li").click(function(){var t=e(this).attr("data-location");e(".filter_location .active").removeClass("active");var a=e(this).addClass("active").html();e(this).closest(".span").find(".current").html(a),e(this).closest(".span").find(".current").attr("data-current",t);var i=e(".filter_title_wrapper .current").attr("data-current");m.find(".job").hide(),"0"!=i?m.find(".job[data-location="+t+"][data-title="+i+"]").show():m.find(".job[data-location="+t+"]").show()}),e(".filter_title li").click(function(){var t=e(this).attr("data-title"),a=e(this).addClass("active").html();e(this).closest(".span").find(".current").html(a),e(this).closest(".span").find(".current").attr("data-current",t);var i=e(".filter_location_wrapper .current").attr("data-current");m.find(".job").hide(),"0"!=i?m.find(".job[data-title="+t+"][data-location="+i+"]").show():m.find(".job[data-title="+t+"]").show()}),e(".filter_reset").click(function(){return m.find(".job").show(),e(".filter_location_wrapper .current").html(e(".filter_location_wrapper .current").attr("data-default")),e(".filter_title_wrapper .current").html(e(".filter_title_wrapper .current").attr("data-default")),e(".filter_location_wrapper .current").attr("data-current",0),e(".filter_title_wrapper .current").attr("data-current",0),!1}),e(".apply_close").click(function(){return e(".white_overlay").hide(),e(".apply_wrapper").fadeOut(),!1}),e("input[type=file].nice").nicefileinput({label:e("input[type=file].nice").attr("data-title")}),e(".apply_btn").click(function(){e(".white_overlay").show(),e(e(this).attr("href")).fadeIn();var t=e(this).closest(".job").attr("data-title"),a=e(this).closest(".job").attr("data-apply");return console.log(t),e("#job_title").val(t),e("#apply_email").val(a),!1});var _=e("#apply_form");_.length>0&&(_.find(".required input").change(function(){e(this).closest(".required").removeClass("error")}),_.submit(function(){var t=!0;if(e(this).find(".require").each(function(){""==e(this).find("input").val()&&(e(this).addClass("error"),t=!1)}),t){var a=new FormData(e(this)[0]);_.addClass("wait"),e.ajax(flow.api_base+o.apply.route,{contentType:!1,processData:!1,data:a,type:"POST",success:function(t){(t.status="1")&&(e(".white_overlay").hide(),e(".apply_wrapper").fadeOut(),_[0].reset(),_.removeClass("wait"))},error:function(e){console.log("errr"),console.log(e)}})}return!1}))});e(window).resize(function(){e(window).width<1024&&a()}),e(window).scroll(function(){a()}),e(window).mousewheel(function(e){i(e)}),document.addEventListener("fullscreenchange",l,!1),document.addEventListener("webkitfullscreenchange",l,!1),document.addEventListener("mozfullscreenchange",l,!1)}(jQuery);