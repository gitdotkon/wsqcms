!function(e){function t(t,a){return e.ajax({url:flow.api_base+t.route,method:t.method,data:a})}function a(){var t=e("#next_screen"),a=e(".first-screen").height(),i=e(".header");if(t.length>0){if(e(window).scrollTop()>0)return i.hasClass("white-header")||i.addClass("white-header"),!1;if(e(window).scrollTop()<a)return e(".header").removeClass("white-header"),!1}}function i(t){if(e(window).width()>1024){var a=e("#next_screen");e(".first-screen").height(),e(".header");if(a.length>0&&t.deltaY<0&&0==e(window).scrollTop())return e("body, html").animate({scrollTop:e(".first-screen").height()-100},300),!1}}function s(e,t,a){var i=new BMap.Map("map_id",{enableMapClick:!1}),s=13;i.centerAndZoom(new BMap.Point(a,t,s)),i.addControl(new BMap.NavigationControl)}function l(e,t,a){new google.maps.LatLngBounds,new google.maps.Map(document.getElementById("map_id"),{center:{lat:t,lng:a},zoom:8,scrollwheel:!1})}function n(t){e("html").toggleClass("iframe-fullscreen")}var o={items:{route:"items",method:"GET"},contact:{route:"contact-us",method:"POST"},mailto:{route:"send-mail",method:"POST"},apply:{route:"apply-form",method:"POST"},news:{route:"news",method:"GET"},videos:{route:"videos",method:"GET"},gallery:{route:"galleries",method:"GET"},gallery_images:{route:"gallery-items",method:"GET"}},r=[];e(window).load(function(){var t=e("#page_list_desc");t.length>0&&t.find("li").hover(function(){var t=e(this).index(),a=e("#fade-image");a.find(".img.active").removeClass("active"),a.find(".img").eq(t).addClass("active"),console.log(t)},function(){})}),e(document).ready(function(){function a(t){var a=_.template(e("#gallery_slider").html()),i=a({slides:t});e("#gallery_slider_slick").append(i),e("#gallery_slider_slick").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,dots:!1})}function i(e){if(r[e])a(r[e]);else{var i=t(o.gallery_images,{gallery_id:e});i.success(function(t){r[e]=t.images_list,a(r[e])})}}function n(t){e(".tab.tab-active").removeClass("tab-active"),t.addClass("tab-active"),console.log(t);var a=t.offset().top-e("#header").height();e("html, body").animate({scrollTop:a})}function c(){e(".tab.tab_tile").removeClass("tab-active"),e(".tab.tab_slider").addClass("tab-active")}function d(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?unescape(t[2]):null}function h(e){var t=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return t.test(e)}var u=(e("#home_page"),window.location.hash),v=e(".next_screen_mousewheel");v.length>0&&(console.log("sfsdf"),e(".next_screen").hover(function(){v.addClass("next_screen_mousewheel_ed")},function(){v.removeClass("next_screen_mousewheel_ed")})),e(".group_property_ul li").length>0&&e(".group_property_ul li").matchHeight(),e(document).on("click",".lightbox_btn, .video-gallery, .show_gallery",function(){var t=e(e(this).attr("href"));if(!t.hasClass("lightbox_visible")){var a=e(this).attr("data-id");if(a)if(e(this).hasClass("view_video")){e("#video_palyer").attr("src",a),console.log(a);var s=document.getElementById("video_palyer");s.play(),e("html").addClass("video_playing")}else e(this).hasClass("view_gallery")?i(a):t.find("iframe").attr("src",a);e(".lightbox_visible").removeClass("lightbox_visible"),t.addClass("lightbox_visible"),e("html").addClass("has_lightbox_visible")}return!1}),e(".lightbox_close").click(function(){if(e(".lightbox_visible").removeClass("lightbox_visible"),e(".has_lightbox_visible").removeClass("has_lightbox_visible"),e("html").hasClass("video_playing")){e("html").removeClass("video_playing");var t=document.getElementById("video_palyer");t.pause()}return e("#gallery_slider_slick").hasClass("slick-initialized")&&(e("#gallery_slider_slick").slick("unslick"),e("#gallery_slider_slick").html("")),!1});var f=e("#map");e(f).length>0&&flow.lat&&flow.lang&&("google"==flow.map_type?l("map",parseFloat(flow.lat),parseFloat(flow.lang)):"baidu"==flow.map_type&&s("map",parseFloat(flow.lat),parseFloat(flow.lang)));var m=e(".map-wrapper");e(m).length>0&&(e(".view-3d-map").click(function(){var t=e(this).attr("href");return console.log(t),e(t).addClass("open").fadeIn(),!1}),e(m).find(".close-map").click(function(){return e(m).removeClass("open").fadeOut(),!1}),e(m).click(function(t){return e(t.target).hasClass("map-wrapper")&&e(m).removeClass("open").fadeOut(),!1})),e(".carousel_slider").owlCarousel({items:5,autoplay:!0,margin:40,nav:!0,navText:[],responsive:{0:{items:1},767:{items:2},960:{items:5}}}),e(".film_with_us_col").matchHeight(),e(".team_detail").find(".flexslider").flexslider({animation:"fade",slideshow:!1,slideshowSpeed:8e3,animationSpeed:800,smoothHeight:!0,start:function(t){e(window).width()>1024?e(".our_team_list_ul ul li").click(function(){var a=e(this),i=parseInt(e(this).attr("data-index"));a.hasClass("active")||(e(".our_team_list_ul .active").removeClass("active"),a.addClass("active"),t.flexAnimate(i))}):e(".our_team_list_ul ul li").click(function(){e(".our_team_list_ul .active").removeClass("active").find(".text").slideUp(300),e(this).addClass("active");var t=e(this);e(this).find(".text").slideDown(300,function(){e("body, html").animate({scrollTop:t.offset().top-e("#header").height()-15},360)})})}}),e(".team_detail").find(".text").scrollbar({showArrows:!1,scrollx:"simple",scrolly:"simple",autoScrollSize:!1});var p=e("#header-menu");if(e(".screen_btns .sync-item").click(function(){var t=e(this).attr("href"),a=e(t);n(a),window.location.hash=t;var i=e(this).closest(".animate_up").index();return e(".screen_btns .active").removeClass("active"),p.find(".active").removeClass("active"),p.find("li").eq(i).addClass("active"),e(this).addClass("active"),!1}),e(".sv_icons a").click(function(){var t=e(this).attr("href"),a=e(t);n(a),window.location.hash=t;var i=e(this).closest("li").index();return e(".sv_icons .active").removeClass("active"),p.find(".active").removeClass("active"),p.find("li").eq(i).addClass("active"),e(this).closest("li").addClass("active"),!1}),p.find(".sync-item").click(function(){var t=e(this).attr("href");console.log(e(this).attr("href")),window.location.hash=t;var a=e(t),i=e(this).closest("li").index();if(e(window).width()<1025){if(!p.hasClass("is_open"))return p.addClass("is_open"),!1;if(e(this).closest("li").hasClass("active"))return p.removeClass("is_open"),!1;p.removeClass("is_open")}return p.find(".active").removeClass("active"),e(".screen_btns .active").removeClass("active"),e(".screen_btns").find(".animate_up").eq(i).find("a").addClass("active"),e(".sv_icons .active").removeClass("active"),e(".sv_icons a[href^="+t+"]").closest("li").addClass("active"),e(this).closest("li").addClass("active"),n(a),!1}),u&&(e("body").hasClass("page-template-stages-page")||(n(e(u)),e(".screen_btns a[href^="+u+"]").addClass("active"),e(".sv_icons .active").removeClass("active"),e(".sv_icons a[href^="+u+"]").closest("li").addClass("active"),p.find("a[href^="+u+"]").closest("li").addClass("active"),u=u.replace("#",""))),e(".tabs.tab-active").length>0){e(".tabs.tab-active").attr("id")}e(window).width()<1025&&p.find("li").click(function(){return p.hasClass("is_open")?e(this).hasClass("active")?(p.removeClass("is_open"),!1):void 0:(p.addClass("is_open"),!1)});var w=e("#workshops_slider .flexslider");if(w.length>0){w.flexslider({animation:"slide",slideshow:!1,slideshowSpeed:8e3,animationSpeed:800,touch:!1,smoothHeight:!0,start:function(t){var a=e("#header-menu"),i=window.location.hash;if(i){var s=e(i).index();c(),t.flexAnimate(s)}e(".screen_btns .workshop_btn").click(function(){c();var a=e(this).closest(".animate_up").index();t.flexAnimate(a)}),a.find("a").click(function(){c();var i=e(this).closest("li").index();if(e(window).width()<1025){if(!a.hasClass("is_open"))return a.addClass("is_open"),!1;if(e(this).closest("li").hasClass("active"))return a.closest("li").removeClass("is_open"),!1}t.flexAnimate(i)}),e("#workshop_four_tile .work_shops_tile").click(function(){c();var a=e(this).index();window.location.hash="#"+e(this).attr("id"),t.flexAnimate(a)})},before:function(t){var a=t.animatingTo;e(".screen_btns").find(".active").removeClass("active"),e(".screen_btns .animate_up").eq(a).find("a").addClass("active"),p.find(".active").removeClass("active"),p.find("li").eq(a).addClass("active"),console.log(e("#header").height()),e("html, body").animate({scrollTop:e(".first-screen").height()-e("#header").addClass("white-header").height()},360)}});e("#work_shops_close").click(function(){return e(".tab.tab_tile").addClass("tab-active"),e(".tab.tab_slider").removeClass("tab-active"),p.find(".active").removeClass("active"),e(".screen_btns").find(".active").removeClass("active"),window.location.hash="",!1})}e(".stage_detail_slider .flexslider ul").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,dots:!0});var g;g=e(e(window).width()<=1024?"#contact_form_2":"#contact_form"),e(document).on("click",".error input",function(){e(this).closest(".field").removeClass("error")}),g.length>0&&(e(".thank-you .close").click(function(){return e(".thank-you").hide(),g.find(".field input, .field textarea").val(""),g.find(".placeholder").show(),!1}),g.submit(function(a){console.log("sss");var i=e(this),s=i.find("input.name").val().trim(),l=i.find("input.email").val().trim(),n=!0;0==s.length&&(i.find("input.name").closest(".field").addClass("error"),n=!1),0!=l.length&&h(l)||(i.find(".email").closest(".field").addClass("error"),n=!1);var r=e(this).serialize(),c=e(this).attr("action"),u=window.location.href.lastIndexOf("/");if(c=window.location.href.substr(0,u)+"/"+c,!n)return!1;var v=(d("captcha"),t(o.contact,{validation:g.find(".field_captcha input").val()}));return v.success(function(a){if(console.log(a),1==a.status){g.addClass("wait");var s=t(o.mailto,r);console.log(r),s.success(function(e){console.log(e)}),e(".thank-you").show(),e(i).removeClass("wait"),s.error(function(e){}),s.complete(function(e){console.log(e)})}else console.log("Wrong Captcha"),g.find(".field_captcha").addClass("error")}),!1}),e(".contact_form :input").keyup(function(){e(this).val()?e(this).siblings("label").hide():e(this).siblings("label").show()})),e(".job .title").click(function(){var t=e(this).parent(".job");return t.hasClass("job_open")?t.removeClass("job_open").find(".desc").slideUp():(e(".job_open").removeClass("job_open").find(".desc").slideUp(),t.addClass("job_open").find(".desc").slideDown()),!1});var C=e("#job_list");e(".filter_location li").click(function(){var t=e(this).attr("data-location");e(".filter_location .active").removeClass("active");var a=e(this).addClass("active").html();e(this).closest(".span").find(".current").html(a),e(this).closest(".span").find(".current").attr("data-current",t);var i=e(".filter_title_wrapper .current").attr("data-current");C.find(".job").hide(),"0"!=i?C.find(".job[data-location="+t+"][data-title="+i+"]").show():C.find(".job[data-location="+t+"]").show()}),e(".filter_title li").click(function(){var t=e(this).attr("data-title"),a=e(this).addClass("active").html();e(this).closest(".span").find(".current").html(a),e(this).closest(".span").find(".current").attr("data-current",t);var i=e(".filter_location_wrapper .current").attr("data-current");C.find(".job").hide(),"0"!=i?C.find(".job[data-title="+t+"][data-location="+i+"]").show():C.find(".job[data-title="+t+"]").show()}),e(".filter_reset").click(function(){return C.find(".job").show(),e(".filter_location_wrapper .current").html(e(".filter_location_wrapper .current").attr("data-default")),e(".filter_title_wrapper .current").html(e(".filter_title_wrapper .current").attr("data-default")),e(".filter_location_wrapper .current").attr("data-current",0),e(".filter_title_wrapper .current").attr("data-current",0),!1}),e(".apply_close").click(function(){return e(".white_overlay").hide(),e(".apply_wrapper").fadeOut(),!1}),e("input[type=file].nice").length>0&&e("input[type=file].nice").nicefileinput({label:e("input[type=file].nice").attr("data-title")}),e(".apply_btn").click(function(){e(".white_overlay").show(),e(e(this).attr("href")).fadeIn();var t=e(this).closest(".job").attr("data-title"),a=e(this).closest(".job").attr("data-apply");return console.log(t),e("#job_title").val(t),e("#apply_email").val(a),!1});var b=e("#apply_form");b.length>0&&(b.find(".required input").change(function(){e(this).closest(".required").removeClass("error")}),b.submit(function(){var t=!0;if(e(this).find(".require").each(function(){""==e(this).find("input").val()&&(e(this).addClass("error"),t=!1)}),t){var a=new FormData(e(this)[0]);b.addClass("wait"),e.ajax(flow.api_base+o.apply.route,{contentType:!1,processData:!1,data:a,type:"POST",success:function(t){(t.status="1")&&(e(".white_overlay").hide(),e(".apply_wrapper").fadeOut(),b[0].reset(),b.removeClass("wait"))},error:function(e){console.log("errr"),console.log(e)}})}return!1})),e("#more_news").click(function(){var a=e("#news_per_page").val(),i=e("#news_count").val(),s=t(o.news,{news_count:i,news_per_page:a});return e(".load_more").addClass("wait"),s.success(function(t){0==parseInt(t.available)?e("#more_news").hide():e("#news_count").val(parseInt(e("#news_count").val())+t.news.length),console.log(t);var a=_.template(e("#news-item").html()),i=a({news:t.news});e("#news_container").append(i),e(".load_more").removeClass("wait")}),!1}),e("#more_video").click(function(){var a=e("#video_per_page").val(),i=e("#videos_count").val(),s=t(o.videos,{videos_count:i,videos_per_page:a});return e(".load_more").addClass("wait"),s.success(function(t){0==parseInt(t.available)?e("#more_video").hide():e("#videos_count").val(parseInt(e("#videos_count").val())+t.videos.length),console.log(t);var a=_.template(e("#video-item").html()),i=a({videos:t.videos});e("#video_container").append(i),e(".load_more").removeClass("wait")}),!1}),e("#more_gallery").click(function(){var a=e("#gallery_per_page").val(),i=e("#gallery_count").val(),s=t(o.gallery,{gallery_count:i,gallery_per_page:a});return e(".load_more").addClass("wait"),s.success(function(t){0==parseInt(t.available)?e("#more_gallery").hide():e("#gallery_count").val(parseInt(e("#gallery_count").val())+t.gallery.length),console.log(t);var a=_.template(e("#gallery-item").html()),i=a({galleries:t.gallery});e("#gallery_container").append(i),e(".load_more").removeClass("wait")}),!1}),e(".menu_btn").click(function(){return e("body").addClass("main_nav_visible"),e("html").toggleClass("menu_is_open"),!1}),e(".main_nav_close").click(function(){return e("body").removeClass("main_nav_visible"),e("html").toggleClass("menu_is_open"),!1}),e(".main_nav_list .menu-item-has-children>a").after('<span class="menu-expand"></span>'),e(".middle, .right").find(".sub-menu a").each(function(){var t=e(this).attr("title"),a=e(this).html(),i='<span class="'+t+'"></span>'+a;e(this).html(i),e(this).attr("href")=="#"+u&&(e(this).closest("li").addClass("current_page_item"),e(this).closest(".menu").find(".menu-item-has-children").removeClass("current_page_item"))}),e(".menu a").click(function(){var t=e(this).closest(".menu").find(".hash-redirect");if(t.length>0){var a=t.find(">a").attr("href")+e(this).attr("href");window.location=a,console.log(a)}}),e(document).on("click",".menu-expand",function(){var t=e(this).closest("li"),a=t.find(".sub-menu");t.hasClass("open")?(t.removeClass("open"),a.slideUp()):(e(".main_nav_list .open .sub-menu").slideUp(),e(".main_nav_list .open").removeClass("open"),t.addClass("open"),a.slideDown())})});e(window).resize(function(){e(window).width<1024&&a()}),e(window).scroll(function(){a()}),e(window).mousewheel(function(e){i(e)}),document.addEventListener("fullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1)}(jQuery);